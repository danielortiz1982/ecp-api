const express         = require('express')
const chalk           = require('chalk')
const path            = require('path')
const server          = express()
const PORT            = process.env.port || 5500
const EcpApiRouter    = require('./router/epc-api-router')  
const UserRouter      = require('./router/users-router')
const ServerMessage   = `ECP API is running on localhost:${PORT}`
const db              = require('./utilities/db-connect')
const pub             = `${__dirname}/public/`

server.use(express.static(pub))
server.use(express.json())

////////////////////////////////////////////////////////////////////////  API Router  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Users API Router
server.use(UserRouter)

// ECP API Router
server.use(EcpApiRouter)

////////////////////////////////////////////////////////////////////////  API Router  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

server.listen(PORT, ()=>{
    return console.log(chalk.blue(ServerMessage))
})